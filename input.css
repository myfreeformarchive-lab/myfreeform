/* input.css - Main CSS entry file for the My Freeform app */
/* Imports Tailwind's layers and defines custom styles, variables, and overrides */

/* âœ… TAILWIND IMPORTS: Pull in Tailwind's base styles, components, and utilities */
/* These provide the foundation for utility classes used throughout the app */
@import "tailwindcss";
@tailwind base;
@tailwind components;
@tailwind utilities;

/* âœ… THEME VARIABLES: Define custom CSS properties for fonts and colors */
/* These extend the design system, providing a full brand palette and font stacks */
/* Accessible via CSS custom properties (e.g., var(--color-brand-500)) or Tailwind classes */
@theme {
  /* Fonts: Define font families with fallbacks for cross-platform compatibility */
  --font-sans: "Inter", ui-sans-serif, system-ui;        /* Clean sans-serif for UI */
  --font-serif: "Playfair Display", ui-serif, Georgia;   /* Elegant serif for headings */
  --font-mono: "Roboto Mono", ui-monospace, SFMono-Regular; /* Monospace for code/timestamps */
  --font-hand: "Dancing Script", cursive;                 /* Handwritten cursive for emphasis */

  /* Expanded Brand Palette (Indigo Base): Full spectrum from light to dark */
  --color-brand-50:  #eef2ff; /* Pale background (e.g., for subtle highlights) */
  --color-brand-100: #e0e7ff; /* Light hover background (e.g., button hovers) */
  --color-brand-200: #c7d2fe; /* Subtle borders (e.g., desktop focus rings) */
  --color-brand-300: #a5b4fc; /* Medium accent */
  --color-brand-400: #818cf8; /* Lighter brand shade */
  --color-brand-500: #3f51b5; /* Primary brand color (main buttons, links) */
  --color-brand-600: #303f9f; /* Darker for hovers/actives */
  --color-brand-700: #283593; /* Deep accent for strong emphasis */
}

/* âœ… FORM ELEMENT OVERRIDES: Custom styles for textarea and input */
/* Ensures consistent cursor (text insertion beam) and prevents word breaking for better UX */
textarea, input {
  /* Custom text cursor: Vertical beam icon for better visual feedback */
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="black" d="M10 2h2v1h-3v10h3v1h-8v-1h3V3H4V2h6z"/></svg>') 8 8, text;
  /* Word-break: Keeps words intact to avoid awkward line breaks in input */
  word-break: keep-all; 
}


/* Continuing from the theme variables and form overrides... */

/* âœ… LOAD TRIGGER: Styles for the infinite scroll trigger element */
/* This is the element that detects when to load more posts */
/* Hidden initially but takes up space to prevent layout shifts */
#loadTrigger {
  width: 100%;
  min-height: 50px; /* Crucial: Chrome needs to see height for proper detection */
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity 0.3s; /* Smooth fade in/out */
  /* Start hidden but with physical size to maintain layout */
  visibility: hidden; 
}

/* 1. GLOBAL RESET & SCROLLBAR HIDING */
/* Resets and hides scrollbars for a cleaner, mobile-like UI */

/* Box-sizing reset: Ensures padding/borders are included in width calculations */
* {
  box-sizing: border-box;
}

/* Hide scrollbars globally on all elements for a sleek look */
html, body, #feedList, textarea {
  scrollbar-width: none !important;         /* Firefox */
  -ms-overflow-style: none !important;      /* IE/Edge */
}

html::-webkit-scrollbar, 
body::-webkit-scrollbar, 
#feedList::-webkit-scrollbar, 
textarea::-webkit-scrollbar {
  display: none !important; /* WebKit browsers (Chrome, Safari) */
}

/* Media elements: Responsive sizing to fit containers */
img, video, canvas {
  max-width: 100%;
  height: auto;
}

/* HTML root: Full width, prevent forced scrolling for dynamic content */
html {
  width: 100%;
  overflow: visible !important; /* Allow content to expand naturally */
  height: auto !important;      /* Dynamic height based on content */
}

/* 3. THE MASTER SCROLLER (The Engine): Body styles for smooth scrolling */
/* Configures the main scroll container for the app's feed behavior */
body {
  margin: 0;
  padding: 0;
  width: 100%;
  overflow: visible !important;
  height: auto !important;
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
  overscroll-behavior-y: contain;
  touch-action: pan-y pinch-zoom;
}

/* 4. THE HEADER (Fixed Anchor): Styles for the fixed top navigation */
/* Keeps the header in place while content scrolls beneath it */
header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  background: white;
  height: 56px;
  /* FIX: Prevent shaking by hinting GPU and disabling transforms */
  will-change: transform; /* Optimizes for fixed position */
  transform: translateZ(0); /* Forces hardware acceleration */
  backface-visibility: hidden; /* Reduces flicker */
}

/* Section Group: Styles for main content sections (e.g., input area, feed) */
section.group {
  scroll-snap-align: start;
  scroll-snap-stop: always;
  
  /* FIX: Reduced padding/margin for tighter hide behind header */
  padding-top: 56px; /* Matches header height exactly */
  margin-top: 0 !important; /* Removed negative margin to prevent overlap issues */
  
  scroll-margin-top: 0px;
  
  position: relative;
  z-index: 10;
  min-height: auto;
  background: white;
  /* FIX: Add transition for smooth hide/show on tab switch */
  transition: transform 0.3s ease; /* Allows JS to translateY(-100%) to hide */
}

/* Tabs Container: Becomes fixed below header when scrolling/active */
/* Updated: Added fixed positioning logic for "float solid" behavior */

/* Sticky Elements: General class for sticky positioning */
.sticky {
  z-index: 40; /* Lower than header/modal z-indexes for layering */
}

/* 3. THE FEED CONTAINER: Styles for the main posts list */

#feedList {
  width: 100%;
  display: flex;
  flex-direction: column;
  padding-bottom: 20vh;
  /* FIX: Added scroll snapping to container for better post control */
   /* Moved from body for per-element snapping  scroll-snap-type y proximity;*/
}

/* FeedList Optimizations: Kept for performance */
#feedList {
  will-change: transform, opacity;
  transition: transform 0.3s ease, opacity 0.3s ease;
  backface-visibility: hidden;
  transform-style: preserve-3d;
}

/* Feed Item: Snapping for dynamic post sizes */
/* Updated: Adjusted offset for fixed tabs below header */
.feed-item {
  width: 100%;
  scroll-snap-align: start;
  /* FIX: Updated for fixed tabs (header 56px + tabs 56px = 112px, no extra margin) */
  scroll-margin-top: 112px !important; /* Accounts for fixed header + fixed tabs */
}

/* Responsive Adjustments: Tabs behavior on smaller screens */
@media (max-width: 768px) {
  #tabs {
    top: 56px; /* Still below header on mobile */
    z-index: 50;
  }
}

/* Main Container: Ensures the main content area adapts properly */
main.max-w-xl.mx-auto {
  overflow: visible !important; /* Allows content to expand */
  height: auto !important;      /* Dynamic height */
}

/* Tabs Container: Sticky positioning for tab navigation */
#tabs {
  position: fixed;
  top: 56px; /* Below header */
  left: 50%; /* Start at center of viewport */
  transform: translateX(-50%); /* Shift back to center properly */
  max-width: 36rem; /* Matches main's max-w-xl (576px) */
  width: 100%; /* Full width within the max-width constraint */
  z-index: 50;
  background: white;
  height: 56px;
  /* Stability fixes */
  will-change: transform;
  backface-visibility: hidden;
}

/* 3. Modal Animations: Keyframes and triggers for modal appearance */
/* Smooth fade and slide effects for better UX */

/* Fade In: Simple opacity transition for overlays */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Trigger fade for modal overlay when visible */
#commentModal:not(.hidden) #closeModalOverlay {
  animation: fadeIn 0.3s ease-out forwards;
}

/* Slide Up: Bottom-to-top entrance for modal content */
@keyframes slideUp {
  from { transform: translateY(100%); opacity: 0; } /* Starts below viewport */
  to { transform: translateY(0); opacity: 1; }     /* Slides to center */
}

/* Trigger slide for modal card with easing */
#commentModal:not(.hidden) #modalCard {
  animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards; /* Smooth, bouncy curve */
}

/* 4. Comment Bubbles: Animation for comment appearances */
@keyframes popIn {
  from { opacity: 0; transform: scale(0.95); } /* Slightly smaller and transparent */
  to { opacity: 1; transform: scale(1); }      /* Full size and visible */
}

/* Apply pop-in animation to comment bubbles */
.comment-bubble {
  animation: popIn 0.2s ease-out forwards; /* Quick, subtle entrance */
}


/* =========================================
    SHARE SYSTEM 
   ========================================= */

.share-trigger-btn {
  width: 32px;
  height: 32px;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #f8fafc; 
  border: 1px solid #f1f5f9; 
  color: #94a3b8; 
  transition: all 0.2s ease;
  cursor: pointer;
}

.share-trigger-btn:hover,
.share-trigger-btn.active {
  background-color: #eef2ff; 
  border-color: #c7d2fe; 
  color: #4f46e5; 
  transform: scale(1.05);
}

.share-menu {
  position: absolute;
  right: 0;
  bottom: 100%; 
  margin-bottom: 8px; 
  display: flex;
  gap: 6px;
  background-color: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(8px);
  padding: 6px;
  border-radius: 9999px; 
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  border: 1px solid #f1f5f9;
  z-index: 50;
  opacity: 0;
  visibility: hidden;
  transform: translateY(10px) scale(0.95);
  transform-origin: bottom right;
  transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
  pointer-events: none;
}

.share-menu.active {
  opacity: 1;
  visibility: visible;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

.share-icon-btn {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #e2e8f0;
  transition: transform 0.2s, background-color 0.2s, color 0.2s;
  cursor: pointer;
}

.share-icon-btn:hover {
  transform: translateY(-2px);
}

.share-icon-btn:active {
  transform: scale(0.95);
}

/* =========================================
   TOAST ANIMATIONS 
   ========================================= */

.toast-glass {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(0, 0, 0, 0.05);
  color: #1e293b; /* slate-800 */
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
}

@keyframes toastSlideUp {
  0% { 
    opacity: 0; 
    transform: translateY(40px) scale(0.9); 
  }
  100% { 
    opacity: 1; 
    transform: translateY(0) scale(1); 
  }
}

@keyframes toastFadeDown {
  0% { opacity: 1; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(20px); }
}

.toast-enter {
  animation: toastSlideUp 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards;
}

.toast-exit {
  animation: toastFadeDown 0.3s ease-in forwards;
}

/* =========================================
   DIALOG ANIMATIONS 
   ========================================= */

/* Ensure the overlay is invisible but ready */
#custom-dialog {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.15s ease-out;
}

/* The card's starting state (shrunk) */
#custom-dialog .relative {
  transform: scale(0.9);
  transition: transform 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

/* State when active */
#custom-dialog.dialog-open {
  opacity: 1 !important;
  pointer-events: auto !important;
}

#custom-dialog.dialog-open .relative {
  transform: scale(1) !important;
}

/* =========================================
   Rotation Lock
   ========================================= */

/* ðŸš€ THE STUBBORN LOCK */
/* Detects if the screen is wider than it is tall (Landscape) */
@media (orientation: landscape) and (max-device-width: 932px) {
    #orientation-shield {
        display: flex !important;
    }
    
    /* This hides the main app container so they can't see the broken layout */
    /* Replace '#app-container' with the ID of your main wrapper div */
    #app-container { 
        display: none !important;
    }
}

/* =========================================
   Modal Content
   ========================================= */

.post-body a {
  overflow-wrap: break-word;
  word-break: break-word; 
  text-decoration-skip-ink: auto; 
}

#link-exit-modal {
    display: none; /* Hidden by default */
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(4px);
    z-index: 9999;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.modal-content {
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 12px;
    max-width: 400px;
    width: 100%;
    padding: 24px;
    text-align: center;
}

.modal-btn {
    padding: 10px 20px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

/* =========================================
   innerHTML design frames
   ========================================= */

/* Custom animations for bot-generated messages */
@keyframes pulse {
    0%, 100% { 
        opacity: 1; 
    }
    50% { 
        opacity: 0.5; 
    }
}

@keyframes shake {
    0%, 100% { 
        transform: translateX(0); 
    }
    25% { 
        transform: translateX(-5px); 
    }
    75% { 
        transform: translateX(5px); 
    }
}

/* =========================================
   Injection Animation for Feed
   ========================================= */

/* Graceful Fade-In */
.fade-in {
  animation: fadeIn 0.7s cubic-bezier(0.25, 0.8, 0.25, 1) forwards;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Modern Slide-In-from-Top with Bounce */
.slide-in-from-top-4 {
  animation: slideInFromTop 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

@keyframes slideInFromTop {
  0% {
    transform: translateY(-1.5rem);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Combined Animation */
.animate-in {
  animation: combinedFadeSlide 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

@keyframes combinedFadeSlide {
  0% {
    transform: translateY(-1.5rem);
    opacity: 0;
    will-change: transform, opacity;
  }
  60% {
    transform: translateY(0.2rem); /* Overshoot */
    opacity: 1;
    will-change: transform, opacity;
  }
  80% {
    transform: translateY(0.1rem); /* Start slowing down */
    opacity: 1;
  }
  100% {
    transform: translateY(0); /* Rest at final position */
    opacity: 1;
    will-change: auto;
  }
}
